<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
<script>

var app = angular.module("myApp", []);

app.controller("myCtrl", function ($scope, $http) {
	$scope.txtCode = "";
	$scope.txtInput = "";
	$scope.txtTargets = "";
	$scope.txtBreaks = "";

	$scope.btnUpload = function () {
		var targets = [];
		var breaks = [];
		var txtTargets = $scope.txtTargets.trim();
		var txtBreaks = $scope.txtBreaks.trim();

		if (txtTargets) {
			txtTargets.split(' ').forEach((target) => {
				targets.push(target);
			});
		}

		if (txtBreaks) {
			txtBreaks.split(' ').forEach((breakpoint) => {
				breaks.push(Number(breakpoint));
			});
		}

		$http({
			method: 'POST',
			url: '/test',
			data: {
				"userCode": $scope.txtCode,
				"userInput": $scope.txtInput,
				"targets": targets,
				"breaks": breaks
			}
		}).then(
			function (res) {
				$('#resResult').html(JSON.stringify(res.data, null, 2));
			}, 
			function (res) {
				alert('error!');
				console.log(res);
			}
		);
	}

});

</script>
</head>
<body ng-app="myApp" ng-controller="myCtrl">
	<div>
		<p>
		<span>code</span>
		<textarea style="height:500px; width:500px;" ng-model="txtCode"></textarea>
		</p>
		<p>
		<span>input</span>
		<textarea style="height: 100px; width:500px;" ng-model="txtInput"></textarea>
		</p>
		<p>
		<span>targets</span>
		<input style="width:200px;" type="text", ng-model="txtTargets" />
		</p>
		<p>
		<span>breaks</span>
		<input style="width:200px;" type="text" ng-model="txtBreaks" />
		</p>

		<input type="button" value="upload!" ng-click="btnUpload()" />
	</div>
	<pre id="resResult">

	</pre>
</body>
</html>

<!--
#include <stdio.h>

int a;

int main() {
	a = 1;
	a = 2;
	a = 3;

	return 0;
}
-->